<%= form_for([:admin,@outlet]) do |f| %>
  <% if @outlet.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@outlet.errors.count, "error") %> prohibited this chapter from being saved:</h2>

      <ul>
      <% @outlet.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :service %> </br>
    <%= f.select :service, options_from_collection_for_select(Service.all,:shortname,:longname,@outlet.service), {include_blank: "Select"}, {:class => "form-control formwidth"} %>
  </div>
  <div class="field"> 
    <%= f.label :service_url %> We should look into making some of this driven by javascript from the service url</br>
    <%= f.text_field :service_url, :class => "form-control formwidth" %>
  </div>
  <div class="field">
    <%= f.label :account %> </br>
    <%= f.text_field :account, {:class => "form-control formwidth" } %>
  </div>
  <div class="field">
    <%= f.label :organization, "Social Media Account Name" %> </br>
    <%= f.text_field :organization, :class => "form-control formwidth" %>
  </div>
  <div class="field">
    <%= f.label :agency_tokens, "Sponsoring Agencies" %> </br>
    <%= f.text_field :agency_tokens, {:class => "form-control formwidth", :value => ""} %>
  </div>
  <div class="field">
    <%= f.label :info_url %> </br>
    <%= f.text_field :info_url, :class => "form-control formwidth" %>
  </div>
  <div class="field">
    <%= f.label :language %> </br>
    <%= f.select :language, options_for_select([["English","English"],["Spanish","Spanish"]], @outlet.language), {include_blank: "Select"}, {:class => "form-control formwidth"} %>
  </div>
  <div class="field">
    <%= f.label :tag_tokens %> </br>
    <%= f.text_field :tag_tokens, {:class => "form-control formwidth", :value => "" }%>
  </div>
  <br/>
  <div class="actions">
    <%= f.submit :class => "btn btn-primary" %>
    <%= link_to 'Back', admin_outlets_path, {:class=>"btn btn-default", role: "button"} %>
  </div>

<% end %>

<% content_for :additional_javascript do %>
  <script>
    $("#outlet_agency_tokens").tokenInput("/admin/agencies/tokeninput.json", {
      crossDomain: false,
      prePopulate: <%= raw @outlet.agencies.map(&:attributes).to_json %>
    });

    $("#outlet_tag_tokens").tokenInput("/admin/official_tags/tokeninput.json", {
      crossDomain: false,
      prePopulate: <%= raw @outlet.tags.to_json %>,
      tokenValue: "name"
    });
  </script>
<% end %>
